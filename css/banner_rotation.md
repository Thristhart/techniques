---
title: Creating a rotating banner animation in pure CSS
categories: 
  - css
  - design
published: true
---

<link rel="stylesheet" href="assets/rotating_banner.css"/>

Here's what we're building today:

<div class="banner final"></div>

We want to create an animation that rotates infinitely between a set of states. In most use cases, that's probably between different background images, but for this article we'll use background color.

Our first step is to build a set of keyframes, which represent each state in our set. In CSS, keyframes are placed at values between 0% and 100%, representing the beginning and end of the animation.
<img src="assets/animation_timeline_1.png" />
Since we're using 3 stages, it might seem reasonable to split it to 0%, 50% and 100%:
<img src="assets/animation_timeline_2.png" />
gist insert goes here

But that ends up looking like this - notice the transition between Frame3 and Frame1 happens instantly.

<div class="banner attempt1"></div>

This is because there's no space between the 0% and 100% points in the animation. Essentially, the 0% and 100% points are the same, if the animation is going to repeat.
<img src="assets/animation_timeline_3.png" />

In order to solve this, we need to put more space between the last frame and the first frame. 100% divided by the number of frames = ~33%. So let's change the placement to intervals of 33: 0%, 33% and 66%.
<img src="assets/animation_timeline_4.png" />

more gist here

But now there's a new problem. Watch how Frame3 fades to a different color altogether before switching to Frame1!

<div class="banner attempt2"></div>

This is because, according to the [CSS3 Animation Spec](http://www.w3.org/TR/css3-animations/#keyframes),

> If a ‘0%’ or ‘from’ keyframe is not specified, then the user agent constructs a ‘0%’
keyframe using the computed values of the properties being animated. If a ‘100%’ or ‘to’
keyframe is not specified, then the user agent constructs a ‘100%’ keyframe using the
computed values of the properties being animated.

So even though we didn't specify a 100% frame, there is a hidden 100% frame generated by the browser, populated with how the element would look without our animation properties. To solve that, we'll just specify that the 100% frame should be the same as the 0% frame.

last keyframe gist

Now that we've figured out the keyframes, let's talk about timing functions. The timing function is a mathematical function that describes how fast a one-dimensional value changes over the course of an animation. The default timing function for an animation is _ease_. Take a look at the [MDN article on timing functions](https://developer.mozilla.org/en-US/docs/Web/CSS/timing-function). 

The _ease_ timing function looks like this:
<img src="https://mdn.mozillademos.org/files/3429/cubic-bezier,ease.png" />

Notice how it is very curvy, and thus is constantly transitioning. This is ideal for something like moving an element or changing the width of an element, because the movement looks smooth:

<div class="banner easeDemo"></div>